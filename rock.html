<html>
<head>
    <link rel="stylesheet" href="font-awesome-4.7.0\css\font-awesome.css">
    <link rel="stylesheet" href="common.css">
    <link rel="stylesheet" type="text/css" href="https://cdn.datatables.net/1.10.15/css/jquery.dataTables.min.css">
    </head>
    <body>
         <ul>
            <img src="logo.png" height="55" width="55" style="margin-bottom:-15px;">
            <div class="list"> 
                <li>Premium</li>
                <li>Help</li>
                <li>Download</li>
                <li>Sign up</li>
         </ul>
        </div>
        <p class="user_name" align="right" style='color:black;margin-right:5px;'></p>
        <table id="songs">
            <thead>
        <tr>
            <td>album Art</td>
            <td>song</td>
            <td>artist</td>
            <td>album</td>
            <td>duration</td>
        </tr>
    </thead>
    <tbody>
        <tr id="song1" onclick='songPlay(0)'>
            <td><img src="" class ="song_image" hight="90px" width="90px"></td>
            <td class="song_name"></td>
            <td class="song_artist"></td>
            <td class="song_album"></td>
            <td class="song_duration"></td>
        </tr>
        <tr id="song2" onclick='songPlay(1)'>
            <td><img src="" class ="song_image" hight="90px" width="90px"></td>
            <td class="song_name"></td>
            <td class="song_artist"></td>
            <td class="song_album"></td>
            <td class="song_duration"></td>
        </tr>
        <tr id="song3" onclick='songPlay(2)'>
            <td><img src="" class ="song_image" hight="90px" width="90px"></td>
            <td class="song_name"></td>
            <td class="song_artist"></td>
            <td class="song_album"></td>
            <td class="song_duration"></td>
        </tr>
    </tbody>
    </table>
    <audio id="player">
        <source src="Fade_To_Black.mp3" type="audio/mp3"/>
    </audio>
    
    <div class="foot">
    <img src="" id="cover2" style='height:98%;width:8%;border-radius:6%;'>

    <input type="text" id="foot_name" size="15" style="font-family: helvetica;font-size: 15px;">
    
    <input type="text" id="foot_album" size="15" style="font-family:helvetica;font-size: 15px;background-color: Transparent;border: none;">
    <input type="text" id="duration" size="4" maxlength="5" style="font-family: helvetica;font-size: 15px;position:absolute;margin-top:3px;margin-left:10%;">
    
    <progress id="seekbar" value="0" max="100" style="width:400px;"></progress>


    <i class="fa fa-backward"></i>
    
    <i class="fa fa-play-circle icon"></i>
    
    <i class="fa fa-forward"></i>

    <input type="text" id="current_time" size="4" maxlength="6" style="font-family: helvetica;font-size: 15px;position:absolute;margin-left:135px;margin-top:3px;">

    </div>
    <script src="jquery-2.2.0.js"></script>
    <script type="text/javascript" src="https://cdn.datatables.net/1.10.15/js/jquery.dataTables.min.js"></script>
    <script>
    var song = document.querySelector('audio');
    window.onload = setInterval(function(){ var song = document.querySelector('audio');
        document.getElementById('duration').value=fancyTimeFormat(song.duration);
        document.getElementById('current_time').value=fancyTimeFormat(song.currentTime);
     }, 1000)
    song.addEventListener('timeupdate', onLoadProgress);
    var myProgressBar = document.getElementById('seekbar'); 
    function onLoadProgress () {
    var progress= parseInt(((song.currentTime / song.duration) * 100), 10);
    console.log(progress);
    myProgressBar.value = progress; 
}
    function fancyTimeFormat(time)
{   
    // Hours, minutes and seconds
    var hrs = ~~(time / 3600);
    var mins = ~~((time % 3600) / 60);
    var secs = time % 60;

    // Output like "1:01" or "4:03:59" or "123:03:59"
    var ret = "";

    if (hrs > 0) {
        ret += "" + hrs + ":" + (mins < 10 ? "0" : "");
    }

    ret += "" + mins + ":" + (secs < 10 ? "0" : "");
    ret += "" + secs;
    return ret;
}
    $('.user_name').text(localStorage.getItem("name"));//for geting name of user which was taken as input in songify.html
    var i=0;
    var song_image=['Fade-To-Blackc.jpg','master of  puppetsc.jpg','whiskey in the jar .jpg']
    var SongName=['Fade_To_Black','master_of_puppets','Whiskey_In_The_Jar'];
    var SongArtist=['metallica','metallica','metallica','metallica'];
    var SongAlbum=['Ride the Lightning','master_of_puppets','wiskey in jar'];
    var SongDuration=['5','6','5.4'];
    document.getElementById("cover2").src=song_image[0];
    document.getElementById('foot_name').value=SongName[0];
    document.getElementById('foot_album').value=SongAlbum[0];
    for(i=0;i<3;i++)
    {
        var name='#song'+(i+1);
         $(name).find('.song_image').attr("src", song_image[i]);
        $(name).find('.song_name').text(SongName[i]);
        $(name).find('.song_artist').text(SongArtist[i]);
        $(name).find('.song_album').text(SongAlbum[i]);
        $(name).find('.song_duration').text(SongDuration[i])
    }
    $('#songs').DataTable({
        });

    $('.icon').on('click',addSongNameClickEvent);
    function addSongNameClickEvent()
    {
        var song=$('audio');
        if (document.getElementById("player").paused==true){
                song[0].play();
                $('.icon').removeClass('fa fa-play-circle');
                $(".icon").addClass("fa fa-pause-circle");
                //$(".fa-pause-circle").addClass("iconshow");
                console.log("changed play");
            }
            else{
                song[0].pause();
                //$(".fa-play-circle").addClass("iconshow");
                $('.icon').removeClass('fa fa-pause-circle')
                $('.icon').addClass('fa fa-play-circle');
                console.log("changed pause");
            }
    }
     $('body').on('keypress', function(event) {
                if (event.keyCode == 32 && event.target.tagName != "INPUT") {
                    addSongNameClickEvent();
                }
            });
    function songPlay(id){
        var song=$('audio');
        var current_song = $('audio').attr('src');
        var request_song=SongName[id]+'.mp3';
        if(current_song!=request_song){
            $(song).attr('src',request_song)
            song[0].load();
            document.getElementById("cover2").src=song_image[id];
            document.getElementById('foot_name').value=SongName[id];
            document.getElementById('foot_album').value=SongAlbum[id];
            song[0].play();
            $(".icon").addClass("fa fa-pause-circle");
            //$(".fa-pause-circle").addClass("iconshow");

            console.log("changed play");
            }
        else{
            addSongNameClickEvent();
        }
}

    </script>
    </body>
    </html>